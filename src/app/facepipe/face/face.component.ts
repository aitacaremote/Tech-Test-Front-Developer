import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';
import * as THREE from 'three';
import {environment} from "../../../environments/environment";
import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls.js';
import {CanvasTexture, PerspectiveCamera, Scene, Texture, WebGLRenderer} from "three";

@Component({
  selector: 'app-face',
  templateUrl: './face.component.html',
  styleUrls: ['./face.component.css']
})
export class FaceComponent implements OnInit{
  geometry: THREE.BufferGeometry;
  @ViewChild("cont") myscene!: ElementRef;
  private renderer?: WebGLRenderer;
  private controls?: OrbitControls;
  private camera?: PerspectiveCamera;
  private scene?: Scene;
  private imData?: THREE.Texture;
  constructor() {
    this.geometry = new THREE.BufferGeometry();
  }

  ngOnInit(): void {






  const canvas = document.createElement("canvas");

 const canvasO= new OffscreenCanvas(400,400);
    const ctx=canvas.getContext('2d');
    const gradient = ctx!.createRadialGradient(110, 90, 30, 100, 100, 70);

// Add three color stops
    gradient.addColorStop(0, "pink");
    gradient.addColorStop(0.9, "white");
    gradient.addColorStop(1, "green");

// Set the fill style and draw a rectangle
    ctx!.fillStyle = gradient;
    ctx!.fillRect(20, 20, 160, 160);
    this.imData = new THREE.Texture(canvas);
 //   window.document.body.appendChild( canvas );






  }
  ngAfterViewInit() {
   this.camera = new THREE.PerspectiveCamera( 27, window.innerWidth / window.innerHeight, 1, 3500 );
    this.camera.position.z = 64;

    this.scene = new THREE.Scene();
    this.scene.background = new THREE.Color( 0xeeeeee );

    //

    const light = new THREE.HemisphereLight();
    light.intensity = 3;
    this.scene.add( light );
    const light1 = new THREE.AmbientLight( 0x404040 ); // soft white light
    this.scene.add( light1 );

const results = [{x:0.6177931427955627,y:0.6292417645454407,z:-0.028184309601783752},{x:0.6148766279220581,y:0.5607044100761414,z:-0.0684882178902626},{x:0.6159369349479675,y:0.5762439370155334,z:-0.03314585983753204},{x:0.6002694964408875,y:0.4921428859233856,z:-0.05637706071138382},{x:0.6140102744102478,y:0.5413172841072083,z:-0.0746346190571785},{x:0.612669825553894,y:0.5133702158927917,z:-0.07172976434230804},{x:0.609695315361023,y:0.44269588589668274,z:-0.04305543377995491},{x:0.5200945138931274,y:0.43365010619163513,z:0.012221816927194595},{x:0.6066298484802246,y:0.3900882601737976,z:-0.03871123865246773},{x:0.6055312156677246,y:0.36390697956085205,z:-0.04420294612646103},{x:0.6024259328842163,y:0.27032119035720825,z:-0.0397215411067009},{x:0.6180606484413147,y:0.6338503360748291,z:-0.025180857628583908},{x:0.6181679964065552,y:0.6374608874320984,z:-0.020021837204694748},{x:0.6180065870285034,y:0.6401578187942505,z:-0.013844761066138744},{x:0.6184853315353394,y:0.6403548121452332,z:-0.009390144608914852},{x:0.6184104681015015,y:0.646526575088501,z:-0.011249518021941185},{x:0.6186585426330566,y:0.6541699767112732,z:-0.013707540929317474},{x:0.618618369102478,y:0.6614585518836975,z:-0.012063423171639442},{x:0.6195926666259766,y:0.682403028011322,z:-0.0007022216450423002},{x:0.6154171228408813,y:0.5697546005249023,z:-0.061117373406887054},{x:0.6012946367263794,y:0.5682774782180786,z:-0.042496003210544586},{x:0.46793118119239807,y:0.3528726398944855,z:0.0663975328207016},{x:0.5585880875587463,y:0.4479523301124573,z:-0.0012794074136763811},{x:0.5454713106155396,y:0.45040959119796753,z:0.0003741644322872162},{x:0.5321658849716187,y:0.45057153701782227,z:0.004345613531768322},{x:0.5149459838867188,y:0.4399929642677307,z:0.01523603219538927},{x:0.5691831111907959,y:0.44329723715782166,z:-0.000796208914835006},{x:0.5335322618484497,y:0.3973971903324127,z:-0.009152158163487911},{x:0.5482527017593384,y:0.39828965067863464,z:-0.009835420176386833},{x:0.5206178426742554,y:0.4016469120979309,z:-0.004103997256606817},{x:0.5127933025360107,y:0.40909233689308167,z:0.0020562822464853525},{x:0.5048398971557617,y:0.4521641731262207,z:0.022976603358983994},{x:0.5710105895996094,y:0.7151604890823364,z:0.021388130262494087},{x:0.5148152709007263,y:0.4289425015449524,z:0.016123604029417038},{x:0.4672648310661316,y:0.4365480840206146,z:0.08082078397274017},{x:0.48892778158187866,y:0.43822625279426575,z:0.0350978784263134},{x:0.5477718114852905,y:0.5335578918457031,z:-0.005312339402735233},{x:0.601529061794281,y:0.6260263323783875,z:-0.026375222951173782},{x:0.603430986404419,y:0.6369635462760925,z:-0.017481286078691483},{x:0.5877655744552612,y:0.6292331218719482,z:-0.017364589497447014},{x:0.5781795382499695,y:0.6322774291038513,z:-0.006437947042286396},{x:0.5913047790527344,y:0.6367931962013245,z:-0.01175798662006855},{x:0.5818946361541748,y:0.6370026469230652,z:-0.0023015672340989113},{x:0.558056652545929,y:0.6526142954826355,z:0.017455561086535454},{x:0.6030176877975464,y:0.5607596635818481,z:-0.06724689155817032},{x:0.6005733013153076,y:0.5414606332778931,z:-0.07261429727077484},{x:0.4920590817928314,y:0.3905264139175415,z:0.003716465085744858},{x:0.5735148191452026,y:0.4827960431575775,z:-0.012898974120616913},{x:0.5705982446670532,y:0.5499818325042725,z:-0.03367698937654495},{x:0.5696917176246643,y:0.5385894775390625,z:-0.03038470447063446},{x:0.5103238821029663,y:0.52958744764328,z:0.012751573696732521},{x:0.6002386808395386,y:0.5154844522476196,z:-0.06691008061170578},{x:0.5196642875671387,y:0.3696880340576172,z:-0.02204257994890213},{x:0.5029249787330627,y:0.3774128258228302,z:-0.010445968247950077},{x:0.47786086797714233,y:0.32244759798049927,z:0.03677203133702278},{x:0.5782900452613831,y:0.3837481737136841,z:-0.03391752392053604},{x:0.5613142848014832,y:0.4051203727722168,z:-0.005932926200330257},{x:0.5469846129417419,y:0.6362430453300476,z:0.019959261640906334},{x:0.48797106742858887,y:0.6116355061531067,z:0.13458995521068573},{x:0.5805044770240784,y:0.5607896447181702,z:-0.028367359191179276},{x:0.5919264554977417,y:0.5675475597381592,z:-0.02944563329219818},{x:0.5635808110237122,y:0.6375732421875,z:0.017949752509593964},{x:0.5667771100997925,y:0.6376832127571106,z:0.013810141012072563},{x:0.49546751379966736,y:0.3644227087497711,z:-0.005288633983582258},{x:0.5704136490821838,y:0.5570336580276489,z:-0.025706684216856956},{x:0.5440787672996521,y:0.3697313964366913,z:-0.03013324737548828},{x:0.5407419800758362,y:0.3541943430900574,z:-0.034477509558200836},{x:0.5267688632011414,y:0.2818673253059387,z:-0.01911095716059208},{x:0.4865531921386719,y:0.34397414326667786,z:0.012548090890049934},{x:0.5348724126815796,y:0.3192580044269562,z:-0.027949046343564987},{x:0.48423415422439575,y:0.38054755330085754,z:0.014138862490653992},{x:0.47587141394615173,y:0.3685210049152374,z:0.03841918334364891},{x:0.6023345589637756,y:0.6320756077766418,z:-0.02344086393713951},{x:0.5897114872932434,y:0.6332118511199951,z:-0.014997357502579689},{x:0.5799894332885742,y:0.6343355178833008,z:-0.0053862277418375015},{x:0.5838249325752258,y:0.5643230676651001,z:-0.025581341236829758},{x:0.5653094053268433,y:0.6377031207084656,z:0.015636133030056953},{x:0.5718464851379395,y:0.6412079930305481,z:0.007656858768314123},{x:0.5686138272285461,y:0.637849748134613,z:0.013333968818187714},{x:0.5874258875846863,y:0.5571795105934143,z:-0.04747961089015007},{x:0.5833361148834229,y:0.6385911107063293,z:-0.00018780119717121124},{x:0.5929839611053467,y:0.6386142373085022,z:-0.006463184021413326},{x:0.604671835899353,y:0.639660656452179,z:-0.011778144165873528},{x:0.6021431088447571,y:0.6822723746299744,z:0.0004186063597444445},{x:0.6033392548561096,y:0.6604845523834229,z:-0.010994523763656616},{x:0.6034485101699829,y:0.6529929637908936,z:-0.012440074235200882},{x:0.6040831208229065,y:0.6460733413696289,z:-0.009561305865645409},{x:0.6052333116531372,y:0.6395956873893738,z:-0.007688343524932861},{x:0.5838923454284668,y:0.6389215588569641,z:0.0017827149713411927},{x:0.5816774964332581,y:0.6416723728179932,z:-0.0003365935117471963},{x:0.5797510147094727,y:0.6453723311424255,z:-0.0018186401575803757},{x:0.5782790184020996,y:0.6494606137275696,z:0.0007018210599198937},{x:0.5607970356941223,y:0.6072705388069153,z:-0.004622883163392544},{x:0.4724283218383789,y:0.5143963098526001,z:0.14403721690177917},{x:0.6156585812568665,y:0.5732053518295288,z:-0.042864326387643814},{x:0.576480507850647,y:0.6385440826416016,z:0.008097836747765541},{x:0.5742431879043579,y:0.6403748393058777,z:0.007150392048060894},{x:0.5971347689628601,y:0.5754209756851196,z:-0.029170121997594833},{x:0.575455904006958,y:0.5676443576812744,z:-0.015588000416755676},{x:0.5946244597434998,y:0.5718509554862976,z:-0.029695067554712296},{x:0.5605767965316772,y:0.4940859377384186,z:-0.006486298982053995},{x:0.539560079574585,y:0.5075539946556091,z:-0.0007742116576991975},{x:0.5678609609603882,y:0.5462146997451782,z:-0.022140290588140488},{x:0.4961946904659271,y:0.2983352541923523,z:0.006726135965436697},{x:0.5049859881401062,y:0.3269987404346466,z:-0.008936240337789059},{x:0.5142977833747864,y:0.3546313941478729,z:-0.021254729479551315},{x:0.5696456432342529,y:0.6646896600723267,z:0.010818318463861942},{x:0.5724714398384094,y:0.35820236802101135,z:-0.04159436374902725},{x:0.567196249961853,y:0.318289190530777,z:-0.03885968029499054},{x:0.5612283945083618,y:0.2736038863658905,z:-0.03483404964208603},{x:0.5214990377426147,y:0.4473126530647278,z:0.010133328847587109},{x:0.4920809268951416,y:0.4653659760951996,z:0.03194654360413551},{x:0.5752509236335754,y:0.43808460235595703,z:0.00028323952574282885},{x:0.5002648234367371,y:0.4156988263130188,z:0.013646329753100872},{x:0.5817590951919556,y:0.47090858221054077,z:-0.019221575930714607},{x:0.5785108804702759,y:0.544884443283081,z:-0.04767759516835213},{x:0.4787725806236267,y:0.4775572717189789,z:0.048785410821437836},{x:0.5014490485191345,y:0.47968119382858276,z:0.021392282098531723},{x:0.5180135369300842,y:0.4874784052371979,z:0.009356850758194923},{x:0.5425936579704285,y:0.48399093747138977,z:0.002434242982417345},{x:0.5604775547981262,y:0.4752276837825775,z:-0.0018670879071578383},{x:0.573158860206604,y:0.4665500819683075,z:-0.006910417228937149},{x:0.597409725189209,y:0.4476339519023895,z:-0.036812059581279755},{x:0.4826110005378723,y:0.5182637572288513,z:0.04914378374814987},{x:0.4895749092102051,y:0.4122849106788635,z:0.01949840411543846},{x:0.6080783605575562,y:0.5693262815475464,z:-0.06010544300079346},{x:0.574851930141449,y:0.5042873620986938,z:-0.016394590958952904},{x:0.4652467370033264,y:0.42905372381210327,z:0.12428802251815796},{x:0.5826081037521362,y:0.45660796761512756,z:-0.010558133944869041},{x:0.567353367805481,y:0.5457772612571716,z:-0.008742135018110275},{x:0.5090352296829224,y:0.4289186894893646,z:0.01891203410923481},{x:0.5780114531517029,y:0.5307478904724121,z:-0.043723560869693756},{x:0.4782436788082123,y:0.5614084601402283,z:0.14274021983146667},{x:0.5739707350730896,y:0.43213599920272827,z:0.0027792989276349545},{x:0.5885950326919556,y:0.5210365056991577,z:-0.05798758938908577},{x:0.5134434700012207,y:0.6677636504173279,z:0.06873544305562973},{x:0.5155171155929565,y:0.6859958171844482,z:0.09401467442512512},{x:0.47202906012535095,y:0.518166720867157,z:0.09669198840856552},{x:0.4979623854160309,y:0.639110803604126,z:0.08320863544940948},{x:0.4709925055503845,y:0.3991638720035553,z:0.06294485181570053},{x:0.5681419372558594,y:0.7350912094116211,z:0.03164907544851303},{x:0.6098202466964722,y:0.5729995369911194,z:-0.041972678154706955},{x:0.5633209943771362,y:0.5182729959487915,z:-0.009734202176332474},{x:0.47876110672950745,y:0.4403380751609802,z:0.049104951322078705},{x:0.5334326028823853,y:0.43962323665618896,z:0.004536633845418692},{x:0.5450475215911865,y:0.4401610195636749,z:0.0010175182251259685},{x:0.5702163577079773,y:0.6438607573509216,z:0.01034068875014782},{x:0.4865560531616211,y:0.5567560791969299,z:0.05779016762971878},{x:0.5932121276855469,y:0.7602651119232178,z:0.036559902131557465},{x:0.5522196292877197,y:0.73260098695755,z:0.061349041759967804},{x:0.5349768400192261,y:0.7138320803642273,z:0.07576107978820801},{x:0.6040972471237183,y:0.3176010251045227,z:-0.04318397492170334},{x:0.6211971640586853,y:0.7617024183273315,z:0.03202834352850914},{x:0.5559808015823364,y:0.43781816959381104,z:-0.0003090327081736177},{x:0.5658382177352905,y:0.4347497224807739,z:0.0008876801584847271},{x:0.5718346238136292,y:0.4332229495048523,z:0.002890378702431917},{x:0.48045507073402405,y:0.4067390561103821,z:0.03263624757528305},{x:0.5610908269882202,y:0.42177334427833557,z:-0.002515904139727354},{x:0.5492438673973083,y:0.41799700260162354,z:-0.004823337774723768},{x:0.5383667349815369,y:0.41772785782814026,z:-0.0036865980364382267},{x:0.5279911160469055,y:0.42028531432151794,z:0.0002576273982413113},{x:0.5215667486190796,y:0.42370349168777466,z:0.005045559722930193},{x:0.4643418788909912,y:0.38680222630500793,z:0.09786384552717209},{x:0.5257123708724976,y:0.4369558095932007,z:0.008665311150252819},{x:0.6165968775749207,y:0.5929942727088928,z:-0.028974518179893494},{x:0.5730832815170288,y:0.597642719745636,z:-0.01376382540911436},{x:0.5804924964904785,y:0.5583851337432861,z:-0.03389366716146469},{x:0.597474217414856,y:0.5938867926597595,z:-0.027132723480463028},{x:0.6083289384841919,y:0.4159742593765259,z:-0.035945601761341095},{x:0.5311729311943054,y:0.6945203542709351,z:0.057748667895793915},{x:0.5484248399734497,y:0.7152254581451416,z:0.045605290681123734},{x:0.5923365354537964,y:0.7477611303329468,z:0.019015656784176826},{x:0.5008165240287781,y:0.6535261273384094,z:0.11604740470647812},{x:0.5698569416999817,y:0.42800942063331604,z:0.0005245445063337684},{x:0.590145468711853,y:0.48013052344322205,z:-0.03740950673818588},{x:0.6209877729415894,y:0.7501420974731445,z:0.015168270096182823},{x:0.5709394812583923,y:0.7490252256393433,z:0.046593137085437775},{x:0.4776517450809479,y:0.5603551268577576,z:0.09917514026165009},{x:0.5936965942382812,y:0.6393872499465942,z:-0.0034234020859003067},{x:0.5917712450027466,y:0.6435620188713074,z:-0.005725880619138479},{x:0.5904061794281006,y:0.6493092179298401,z:-0.007844694890081882},{x:0.58942049741745,y:0.6563884019851685,z:-0.006076213903725147},{x:0.5841977000236511,y:0.6758494973182678,z:0.00402000593021512},{x:0.5742759108543396,y:0.6370717287063599,z:0.006018936634063721},{x:0.572179913520813,y:0.6362178921699524,z:0.0060655781999230385},{x:0.5705044865608215,y:0.6349242925643921,z:0.005795543547719717},{x:0.5515790581703186,y:0.6203470230102539,z:0.007290433160960674},{x:0.5022911429405212,y:0.5699612498283386,z:0.03152065724134445},{x:0.5896211266517639,y:0.45808643102645874,z:-0.02731461450457573},{x:0.5820408463478088,y:0.4171615242958069,z:-0.008367662318050861},{x:0.5743095874786377,y:0.41998252272605896,z:-0.0027294729370623827},{x:0.5762244462966919,y:0.6381359696388245,z:0.007270230911672115},{x:0.501823365688324,y:0.6148036122322083,z:0.05594605207443237},{x:0.5924058556556702,y:0.41740182042121887,z:-0.025995364412665367},{x:0.5770286321640015,y:0.695290207862854,z:0.012903491035103798},{x:0.6117024421691895,y:0.48907509446144104,z:-0.06153218820691109},{x:0.5987618565559387,y:0.47068169713020325,z:-0.04829626902937889},{x:0.6105684041976929,y:0.46674782037734985,z:-0.052081894129514694},{x:0.5822033882141113,y:0.5115386843681335,z:-0.033968765288591385},{x:0.620337963104248,y:0.7304999232292175,z:0.005625574849545956},{x:0.6199459433555603,y:0.7056499719619751,z:0.0029510504100471735},{x:0.5982842445373535,y:0.7042886018753052,z:0.006109966896474361},{x:0.5454293489456177,y:0.6605218648910522,z:0.02635452151298523},{x:0.5570458173751831,y:0.5602205395698547,z:-0.004158065654337406},{x:0.5599835515022278,y:0.6807671189308167,z:0.020315658301115036},{x:0.5282162427902222,y:0.5565478801727295,z:0.00286194053478539},{x:0.5461088418960571,y:0.5797997713088989,z:0.0004892117576673627},{x:0.5182443857192993,y:0.5869635939598083,z:0.01723182573914528},{x:0.5941754579544067,y:0.7284806966781616,z:0.009953269734978676},{x:0.5747199654579163,y:0.5213826894760132,z:-0.022849727421998978},{x:0.5344408750534058,y:0.674566924571991,z:0.040668848901987076},{x:0.5524980425834656,y:0.6968849301338196,z:0.033135734498500824},{x:0.5333799123764038,y:0.6380882859230042,z:0.026611316949129105},{x:0.49067339301109314,y:0.5893491506576538,z:0.06562499701976776},{x:0.5174577832221985,y:0.6385896801948547,z:0.040077295154333115},{x:0.4853072166442871,y:0.6007923483848572,z:0.09766402095556259},{x:0.536726176738739,y:0.6043481826782227,z:0.010271131061017513},{x:0.5827680826187134,y:0.4918631613254547,z:-0.02616323158144951},{x:0.5831779837608337,y:0.5539900064468384,z:-0.05032709240913391},{x:0.5746119022369385,y:0.5567958354949951,z:-0.03497784584760666},{x:0.5886796712875366,y:0.542575478553772,z:-0.06075761467218399},{x:0.5696929097175598,y:0.3987963795661926,z:-0.013468747027218342},{x:0.5468777418136597,y:0.3881329298019409,z:-0.01598813757300377},{x:0.5282315015792847,y:0.38729360699653625,z:-0.014445793814957142},{x:0.5131689310073853,y:0.3923034071922302,z:-0.007932985201478004},{x:0.5038906931877136,y:0.4013003706932068,z:0.0013300481950864196},{x:0.5003846883773804,y:0.43328210711479187,z:0.02465941570699215},{x:0.4682692885398865,y:0.4772295355796814,z:0.08963877707719803},{x:0.5126718878746033,y:0.4605497419834137,z:0.016838576644659042},{x:0.5260406732559204,y:0.46644002199172974,z:0.008858984336256981},{x:0.5435782670974731,y:0.46559348702430725,z:0.003053046064451337},{x:0.5597934722900391,y:0.46034613251686096,z:-0.00030320981750264764},{x:0.5718194246292114,y:0.4536726772785187,z:-0.0021429965272545815},{x:0.5797458291053772,y:0.4479968845844269,z:-0.0038996380753815174},{x:0.46913060545921326,y:0.4706573486328125,z:0.1383529007434845},{x:0.5753065347671509,y:0.5607308149337769,z:-0.02806360460817814},{x:0.5907093286514282,y:0.500222384929657,z:-0.04582134261727333},{x:0.5928126573562622,y:0.5569902658462524,z:-0.06076108291745186},{x:0.6005102396011353,y:0.5658097863197327,z:-0.05490007996559143},{x:0.5928946733474731,y:0.5590513944625854,z:-0.05414387583732605},{x:0.5792285799980164,y:0.5661423206329346,z:-0.023388873785734177},{x:0.6031830310821533,y:0.5681750774383545,z:-0.05816379189491272},{x:0.604770839214325,y:0.5709688663482666,z:-0.042133741080760956},{x:0.578535258769989,y:0.43269971013069153,z:0.0005979008274152875},{x:0.5854277014732361,y:0.43737635016441345,z:-0.007242393679916859},{x:0.5891141891479492,y:0.4416172206401825,z:-0.016107868403196335},{x:0.5177245736122131,y:0.42669105529785156,z:0.009854359552264214},{x:0.5079324841499329,y:0.41742461919784546,z:0.010437384247779846},{x:0.6232576370239258,y:0.49074020981788635,z:-0.05738218501210213},{x:0.6992720365524292,y:0.4227939248085022,z:0.00490658450871706},{x:0.6295372247695923,y:0.566493809223175,z:-0.04319290444254875},{x:0.7456808090209961,y:0.3382391929626465,z:0.056133419275283813},{x:0.6627992391586304,y:0.4415431320667267,z:-0.006167370360344648},{x:0.6755159497261047,y:0.4424610733985901,z:-0.005447011440992355},{x:0.6886767148971558,y:0.4408731162548065,z:-0.002255240688100457},{x:0.7049492597579956,y:0.42865556478500366,z:0.0074709439650177956},{x:0.6516019701957703,y:0.43835800886154175,z:-0.004653582815080881},{x:0.6822930574417114,y:0.3898971974849701,z:-0.015339943580329418},{x:0.6679757833480835,y:0.39257991313934326,z:-0.01468002237379551},{x:0.6954026222229004,y:0.39240750670433044,z:-0.011022071354091167},{x:0.7040652632713318,y:0.39855435490608215,z:-0.005383751355111599},{x:0.7164775133132935,y:0.4395535886287689,z:0.014597246423363686},{x:0.6675668954849243,y:0.7084815502166748,z:0.018381083384156227},{x:0.7039766311645508,y:0.4175834655761719,z:0.008446680381894112},{x:0.7526703476905823,y:0.42122915387153625,z:0.07033032923936844},{x:0.7314358949661255,y:0.4251064360141754,z:0.026151657104492188},{x:0.6795107126235962,y:0.5256268978118896,z:-0.01027429848909378},{x:0.6337735056877136,y:0.623165488243103,z:-0.027464885264635086},{x:0.6322541236877441,y:0.6344214081764221,z:-0.018548546358942986},{x:0.6473172903060913,y:0.6241381764411926,z:-0.019536558538675308},{x:0.6572673916816711,y:0.625623881816864,z:-0.009419571608304977},{x:0.6441105604171753,y:0.6327419877052307,z:-0.013670067302882671},{x:0.6537467837333679,y:0.6309802532196045,z:-0.0047720433212816715},{x:0.6774452328681946,y:0.644496738910675,z:0.013510556891560555},{x:0.6264466047286987,y:0.559160590171814,z:-0.06785823404788971},{x:0.627190351486206,y:0.5403026342391968,z:-0.07344362139701843},{x:0.7225494980812073,y:0.3797803223133087,z:-0.005022885277867317},{x:0.6500936150550842,y:0.4783657193183899,z:-0.016177557408809662},{x:0.6589562296867371,y:0.5441166758537292,z:-0.036502618342638016},{x:0.6585004329681396,y:0.5327789187431335,z:-0.03336828202009201},{x:0.7165727019309998,y:0.5170204639434814,z:0.004635174293071032},{x:0.6250492930412292,y:0.5136128664016724,z:-0.06785859912633896},{x:0.6914409399032593,y:0.36261996626853943,z:-0.02857588604092598},{x:0.7098641991615295,y:0.3683859407901764,z:-0.018431121483445168},{x:0.7331748604774475,y:0.3086150884628296,z:0.02745754085481167},{x:0.6339349150657654,y:0.3816245198249817,z:-0.03622599318623543},{x:0.6558966636657715,y:0.40035250782966614,z:-0.009813351556658745},{x:0.6875314712524414,y:0.6258611083030701,z:0.014931997284293175},{x:0.7456055879592896,y:0.5968284010887146,z:0.12525534629821777},{x:0.6498731374740601,y:0.5558866858482361,z:-0.030414467677474022},{x:0.6389912366867065,y:0.5637776255607605,z:-0.030478615313768387},{x:0.6720848083496094,y:0.6289659738540649,z:0.013824494555592537},{x:0.669122040271759,y:0.629507303237915,z:0.010179447010159492},{x:0.7162100076675415,y:0.3554801642894745,z:-0.013591905124485493},{x:0.6599082946777344,y:0.5506622195243835,z:-0.028509492054581642},{x:0.6666451096534729,y:0.3651684522628784,z:-0.03465111181139946},{x:0.6684340238571167,y:0.34971582889556885,z:-0.038951531052589417},{x:0.6798185110092163,y:0.2734283208847046,z:-0.024845561012625694},{x:0.7247937321662903,y:0.33169886469841003,z:0.0038034741301089525},{x:0.6733134984970093,y:0.31233128905296326,z:-0.03277135267853737},{x:0.7295898199081421,y:0.3693300783634186,z:0.004794458393007517},{x:0.7379435300827026,y:0.355225145816803,z:0.02880534902215004},{x:0.63321453332901,y:0.6297329664230347,z:-0.024483289569616318},{x:0.6456426978111267,y:0.6286121606826782,z:-0.016996005550026894},{x:0.6556186676025391,y:0.62840336561203,z:-0.008122166618704796},{x:0.6469964385032654,y:0.5593891739845276,z:-0.02725033462047577},{x:0.6709389090538025,y:0.6291225552558899,z:0.011851229704916477},{x:0.6644228100776672,y:0.634836733341217,z:0.004639159422367811},{x:0.6676729917526245,y:0.6300562620162964,z:0.0098648052662611},{x:0.6426548361778259,y:0.5532350540161133,z:-0.04937361180782318},{x:0.6521276831626892,y:0.6327553391456604,z:-0.0025445467326790094},{x:0.6427924633026123,y:0.6348477005958557,z:-0.00822029821574688},{x:0.6312770247459412,y:0.637778639793396,z:-0.012743976898491383},{x:0.6360371112823486,y:0.6795868277549744,z:-0.0004437379539012909},{x:0.6338605284690857,y:0.6586453914642334,z:-0.011911307461559772},{x:0.6334366202354431,y:0.6512702703475952,z:-0.01329939067363739},{x:0.6327235698699951,y:0.6440141201019287,z:-0.010493818670511246},{x:0.6313644647598267,y:0.6386091113090515,z:-0.008537167683243752},{x:0.6525647640228271,y:0.6341744661331177,z:-0.0003625406534411013},{x:0.6546298265457153,y:0.6364583969116211,z:-0.002508588368073106},{x:0.6566432118415833,y:0.6405180096626282,z:-0.004110076930373907},{x:0.6584792137145996,y:0.6442667245864868,z:-0.0017909497255459428},{x:0.6720062494277954,y:0.5993297696113586,z:-0.008130060508847237},{x:0.75367671251297,y:0.49982526898384094,z:0.1334063708782196},{x:0.6601804494857788,y:0.6324623823165894,z:0.005257894285023212},{x:0.6618829965591431,y:0.6338657736778259,z:0.004206920973956585},{x:0.6345202922821045,y:0.5725149512290955,z:-0.030169183388352394},{x:0.6553915739059448,y:0.5618346929550171,z:-0.01776239648461342},{x:0.6366914510726929,y:0.5688610076904297,z:-0.030683040618896484},{x:0.6638549566268921,y:0.4875832796096802,z:-0.010870283469557762},{x:0.685746431350708,y:0.4988083839416504,z:-0.006745430175215006},{x:0.6611600518226624,y:0.5397980809211731,z:-0.025184908881783485},{x:0.7123545408248901,y:0.28634113073349,z:-0.001071303617209196},{x:0.70438551902771,y:0.3168888986110687,z:-0.01614380069077015},{x:0.6954959034919739,y:0.34769728779792786,z:-0.027883252128958702},{x:0.6664040088653564,y:0.6583822965621948,z:0.007728672120720148},{x:0.6369073987007141,y:0.35606515407562256,z:-0.04390748590230942},{x:0.6410045623779297,y:0.31459569931030273,z:-0.04153616726398468},{x:0.6442979574203491,y:0.26871463656425476,z:-0.03758517652750015},{x:0.699226438999176,y:0.43602314591407776,z:0.002869419986382127},{x:0.7307395935058594,y:0.4519664943218231,z:0.02305610477924347},{x:0.6454111337661743,y:0.4345000684261322,z:-0.0031726404558867216},{x:0.7173594236373901,y:0.4043188989162445,z:0.005208353977650404},{x:0.6403521299362183,y:0.46763285994529724,z:-0.021855928003787994},{x:0.6499799489974976,y:0.5405477285385132,z:-0.04996743053197861},{x:0.7445188164710999,y:0.4621855914592743,z:0.03837021067738533},{x:0.7224002480506897,y:0.46664270758628845,z:0.012740066275000572},{x:0.7063014507293701,y:0.47608131170272827,z:0.0017773030558601022},{x:0.6817201375961304,y:0.475252240896225,z:-0.0035130116157233715},{x:0.6631392240524292,y:0.4688595235347748,z:-0.006460472941398621},{x:0.649236798286438,y:0.46161404252052307,z:-0.010304870083928108},{x:0.6222339272499084,y:0.4460305869579315,z:-0.037946756929159164},{x:0.7437289953231812,y:0.5032135248184204,z:0.03897426277399063},{x:0.72754967212677,y:0.40015822649002075,z:0.010528508573770523},{x:0.6224234700202942,y:0.5679413080215454,z:-0.06059775874018669},{x:0.6508069634437561,y:0.49971121549606323,z:-0.01947293058037758},{x:0.7543009519577026,y:0.4139530062675476,z:0.11298859119415283},{x:0.6390042901039124,y:0.4528113603591919,z:-0.013195745646953583},{x:0.6617734432220459,y:0.5392382740974426,z:-0.011871812865138054},{x:0.7099038362503052,y:0.41745176911354065,z:0.010884583927690983},{x:0.6495569944381714,y:0.5262144804000854,z:-0.04608461260795593},{x:0.7516950368881226,y:0.5467690825462341,z:0.13282348215579987},{x:0.6459802985191345,y:0.4285525381565094,z:-0.000744971795938909},{x:0.6375212073326111,y:0.5180914402008057,z:-0.059704262763261795},{x:0.7228866815567017,y:0.6541159152984619,z:0.061340026557445526},{x:0.7212797403335571,y:0.6721193194389343,z:0.086568184196949},{x:0.7546509504318237,y:0.5022000670433044,z:0.08620657026767731},{x:0.7369197607040405,y:0.6241304874420166,z:0.07464081048965454},{x:0.745668351650238,y:0.3848554193973541,z:0.05291101336479187},{x:0.6716768145561218,y:0.7277031540870667,z:0.028194010257720947},{x:0.6213151216506958,y:0.5717589855194092,z:-0.04227294400334358},{x:0.6633535623550415,y:0.5120473504066467,z:-0.013571560382843018},{x:0.7420222163200378,y:0.4262118339538574,z:0.039016712456941605},{x:0.6860153079032898,y:0.4295736849308014,z:-0.002005551476031542},{x:0.6751257181167603,y:0.431467205286026,z:-0.004834883846342564},{x:0.6664534211158752,y:0.636407196521759,z:0.0069587877951562405},{x:0.7431772351264954,y:0.5414153933525085,z:0.04787665233016014},{x:0.6484747529029846,y:0.7562500834465027,z:0.03457748517394066},{x:0.6868025064468384,y:0.7232581973075867,z:0.056627899408340454},{x:0.703039824962616,y:0.7019011974334717,z:0.0697491466999054},{x:0.663998544216156,y:0.4310305714607239,z:-0.005301523022353649},{x:0.6543006300926208,y:0.4296777844429016,z:-0.003461955115199089},{x:0.6484857797622681,y:0.4288676977157593,z:-0.0009429639321751893},{x:0.7369205951690674,y:0.3939094543457031,z:0.02301381342113018},{x:0.6574270725250244,y:0.41672468185424805,z:-0.006881845649331808},{x:0.6688998341560364,y:0.41145387291908264,z:-0.009963257238268852},{x:0.6799576282501221,y:0.40981706976890564,z:-0.009643246419727802},{x:0.6898789405822754,y:0.4109612703323364,z:-0.006406373344361782},{x:0.6968455910682678,y:0.41374725103378296,z:-0.0020409892313182354},{x:0.7521977424621582,y:0.3713821768760681,z:0.08712214976549149},{x:0.6937230825424194,y:0.42646124958992004,z:0.0017279970925301313},{x:0.659295380115509,y:0.5912987589836121,z:-0.01648128218948841},{x:0.649803102016449,y:0.5537281632423401,z:-0.03590976446866989},{x:0.6353276968002319,y:0.5910800695419312,z:-0.028276139870285988},{x:0.7059711813926697,y:0.682177722454071,z:0.051759738475084305},{x:0.6894624829292297,y:0.7053546905517578,z:0.040991295129060745},{x:0.6486212015151978,y:0.7442140579223633,z:0.017085334286093712},{x:0.7350236177444458,y:0.6391072869300842,z:0.10729125887155533},{x:0.6496683955192566,y:0.42358487844467163,z:-0.003403454553335905},{x:0.6324870586395264,y:0.4777694046497345,z:-0.039174649864435196},{x:0.6693898439407349,y:0.7420787811279297,z:0.04300393909215927},{x:0.7521871328353882,y:0.5452480316162109,z:0.08897799998521805},{x:0.6429983377456665,y:0.6359986662864685,z:-0.005000886507332325},{x:0.6446442008018494,y:0.6406315565109253,z:-0.007260872516781092},{x:0.6464170813560486,y:0.6466056108474731,z:-0.009576092474162579},{x:0.6475926041603088,y:0.6527320742607117,z:-0.007849265821278095},{x:0.6529601812362671,y:0.6712715029716492,z:0.0019851941615343094},{x:0.6617266535758972,y:0.6304053664207458,z:0.0029498294461518526},{x:0.6633615493774414,y:0.6286446452140808,z:0.002632428891956806},{x:0.6649829149246216,y:0.6274226307868958,z:0.002112979767844081},{x:0.681925892829895,y:0.6114757061004639,z:0.0028710137121379375},{x:0.7280352115631104,y:0.5562257766723633,z:0.0230802483856678},{x:0.6309795379638672,y:0.4556688964366913,z:-0.029117096215486526},{x:0.6355205178260803,y:0.41445106267929077,z:-0.010561654344201088},{x:0.6442452669143677,y:0.4164831340312958,z:-0.006043528206646442},{x:0.6593971252441406,y:0.6314823627471924,z:0.004269108176231384},{x:0.7315205335617065,y:0.6006640195846558,z:0.04763760417699814},{x:0.6241526007652283,y:0.4158117175102234,z:-0.027364596724510193},{x:0.6605998873710632,y:0.6893870234489441,z:0.010341627523303032},{x:0.6229631900787354,y:0.46933597326278687,z:-0.04919376224279404},{x:0.6437541246414185,y:0.5074442625045776,z:-0.036047402769327164},{x:0.6405829191207886,y:0.7018153071403503,z:0.004682596772909164},{x:0.6906169652938843,y:0.6508460640907288,z:0.02165859378874302},{x:0.6727165579795837,y:0.5525767803192139,z:-0.007937191054224968},{x:0.6768493056297302,y:0.6722859144210815,z:0.016668569296598434},{x:0.7008289098739624,y:0.5462697148323059,z:-0.0034441438037902117},{x:0.6851618885993958,y:0.57075035572052,z:-0.004160058684647083},{x:0.7128360271453857,y:0.5746968388557434,z:0.010221900418400764},{x:0.6460801362991333,y:0.7252017855644226,z:0.00819887313991785},{x:0.6523026823997498,y:0.5162990689277649,z:-0.025656137615442276},{x:0.7017188668251038,y:0.6634035110473633,z:0.03506962209939957},{x:0.6849426031112671,y:0.6873627305030823,z:0.028902510181069374},{x:0.7010349631309509,y:0.626258134841919,z:0.020731903612613678},{x:0.7413265109062195,y:0.5742603540420532,z:0.05641821026802063},{x:0.7172508835792542,y:0.6259507536888123,z:0.03307798132300377},{x:0.7475351691246033,y:0.5856390595436096,z:0.08801476657390594},{x:0.6955388784408569,y:0.5940496921539307,z:0.004760755691677332},{x:0.6414597630500793,y:0.4882715046405792,z:-0.02863023802638054},{x:0.6459588408470154,y:0.5497864484786987,z:-0.05239599198102951},{x:0.6551567912101746,y:0.5516010522842407,z:-0.03736647218465805},{x:0.639264702796936,y:0.5394008159637451,z:-0.06250439584255219},{x:0.6459675431251526,y:0.39560872316360474,z:-0.016564946621656418},{x:0.6673374772071838,y:0.3825513422489166,z:-0.020668573677539825},{x:0.6858850717544556,y:0.3800581395626068,z:-0.020650312304496765},{x:0.701433539390564,y:0.38305965065956116,z:-0.015243853442370892},{x:0.7119020819664001,y:0.3905710279941559,z:-0.0067208921536803246},{x:0.7190729975700378,y:0.4212270975112915,z:0.016179446130990982},{x:0.7548450231552124,y:0.4616561830043793,z:0.07880059629678726},{x:0.7096236348152161,y:0.4489595293998718,z:0.008892832323908806},{x:0.6964532136917114,y:0.45598548650741577,z:0.0018218245822936296},{x:0.678938090801239,y:0.4573499262332916,z:-0.0027784358244389296},{x:0.6624161601066589,y:0.4540316164493561,z:-0.0049373311921954155},{x:0.6498071551322937,y:0.4489766061306,z:-0.005568129476159811},{x:0.6408918499946594,y:0.4445522725582123,z:-0.006722535006701946},{x:0.7538955211639404,y:0.4557960331439972,z:0.1273626834154129},{x:0.6551385521888733,y:0.5550127625465393,z:-0.03050493821501732},{x:0.6337302923202515,y:0.4973607659339905,z:-0.04750175029039383},{x:0.6365392208099365,y:0.5540547966957092,z:-0.062178246676921844},{x:0.6299682855606079,y:0.563732922077179,z:-0.05561821535229683},{x:0.6369850635528564,y:0.5564254522323608,z:-0.055543333292007446},{x:0.6517941355705261,y:0.5608809590339661,z:-0.025338467210531235},{x:0.6270837187767029,y:0.5662067532539368,z:-0.0588829442858696},{x:0.626175045967102,y:0.5699734091758728,z:-0.042693592607975006},{x:0.6411658525466919,y:0.42947524785995483,z:-0.0022711437195539474},{x:0.6342124938964844,y:0.4346994459629059,z:-0.009396345354616642},{x:0.6308385133743286,y:0.43929335474967957,z:-0.01804060861468315},{x:0.7009883522987366,y:0.41608187556266785,z:0.002478372072800994},{x:0.7101669311523438,y:0.4063207805156708,z:0.0026156471576541662},{x:0.5424569249153137,y:0.42783185839653015,z:0.0005170733784325421},{x:0.5556197166442871,y:0.426862508058548,z:0.0005173252429813147},{x:0.5418416261672974,y:0.4118930399417877,z:0.0005280834739096463},{x:0.5291833877563477,y:0.4286080002784729,z:0.0005205029738135636},{x:0.5429840683937073,y:0.4440652132034302,z:0.0005142209120094776},{x:0.6774157285690308,y:0.4197860360145569,z:0.0005801750812679529},{x:0.6906128525733948,y:0.4184889495372772,z:0.0005612390814349055},{x:0.6766685843467712,y:0.40382149815559387,z:0.0005606971099041402},{x:0.6640856266021729,y:0.42058274149894714,z:0.0005444326670840383},{x:0.6778000593185425,y:0.43541955947875977,z:0.0005458658561110497}];

let minX=100;
    let maxX=-100;
    let minY=100;
    let maxY=-100;
    results.forEach(g=>{
      minX=Math.min(minX,g.x);
      minY=Math.min(minY,g.y);
      maxX=Math.max(maxX,g.x);
      maxY=Math.max(maxY,g.y);
    })
    const uvs:any[] = [];
    const  w = maxX-minX;
    const  h = maxY-minY;
const r = results.map((g,ik)=>{
uvs.push((g.x-minX)/w,(g.y-minY)/h);

  return {x:g.x-minX-w/2, y: g.y-minY - h/2, z:0}});
const rr = r.map(g=>{
 const l=Math.sqrt(g.x*g.x + g.y*g.y);
const ve =new THREE.Vector2(g.x,g.y);
ve.rotateAround(new THREE.Vector2(0,0),0.04);

return {x:ve.x,y:ve.y,z:0}
});
const vertices0:any[]  =[];
rr.forEach(t=>{ vertices0.push(t.x*12+Math.sin((t.x)*2)*3,-t.y*10,t.z*10)});




const vertices = new Float32Array( vertices0 );

    const indices:any[] = [] ;
    const normals:any[] = [] ;

    environment.INDICES.forEach(y=>{indices.push(y[0],y[1],y[2]);normals.push(0,0,1)});
    this.geometry.setIndex( indices );
    this.geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );
    this.geometry.setAttribute( 'normal', new THREE.Float32BufferAttribute( normals, 3 ) );
    this.geometry.setAttribute( 'uv', new THREE.Float32BufferAttribute(uvs, 2 ) );
 const material0 = new THREE.MeshBasicMaterial( {
      side: THREE.DoubleSide,color:0xff0000,wireframe:true

    } );

    function  diffuseVertex() {

      return `
    precision mediump float;
precision mediump int;

uniform mat4 modelViewMatrix; // optional
uniform mat4 projectionMatrix; // optional

attribute vec3 position;
attribute vec4 color;

varying vec3 vPosition;
varying vec4 vColor;
varying vec2 vUv;
void main(){

vPosition = position;
vColor = color;

gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

}
  `
    }

    function testFragment() {
      return `
    precision mediump float;
precision mediump int;
uniform sampler2D test;
varying vec2 vUv;

void main(){
vec4 color1 = texture2D(test, vUv);
//vec4 color = vec4( vColor );
//color.r += sin( vPosition.x * 10.0 ) * 0.5;

gl_FragColor = vec4(color1.r,color1.g,color1.b,0.5);
//gl_FragColor = texture2D(test, vUv);
gl_FragColor.a = color1.a;
}
	`
    }



    const material = new THREE.RawShaderMaterial( {

      uniforms: {// @ts-ignore
        test: { type:'t', value: new THREE.TextureLoader().load( "assets/pat.png" )  }
      },
      vertexShader: diffuseVertex(),
      fragmentShader: testFragment(),
      side: THREE.DoubleSide,



    } );
    const geometry1 = new THREE.BoxGeometry(2, 2, 2);
const cube = new THREE.Mesh( geometry1, material );
    this.scene.add(cube);
  //  this.geometry.u = true;
    const mesh = new THREE.Mesh( this.geometry, material );


this.scene.add( mesh );
    this.renderer = new THREE.WebGLRenderer( { antialias: true,alpha:true } );
    this.renderer.setPixelRatio( window.devicePixelRatio );
    this.renderer.setSize( window.innerWidth, window.innerHeight );
    this.renderer.setClearColor( 0xeeeeee);
    this.myscene.nativeElement.appendChild( this.renderer.domElement );
   this.controls=new OrbitControls(this.camera,this.renderer.domElement);
    this.controls.update();
    this.renderer.render( this.scene, this.camera );
    let component: FaceComponent = this;
    (function render() {
      requestAnimationFrame(render);
     component.controls!.update();


      component.renderer!.render(component.scene!, component.camera!);
    }());


    //geometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) );
  }

}
